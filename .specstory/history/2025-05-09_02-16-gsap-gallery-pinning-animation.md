<!-- Generated by SpecStory -->

# GSAP Gallery Pinning Animation (2025-05-09 11:16:25)

_**User**_

このアニメーションが機能するようにして

---

_**Assistant**_



---

```diff
  
      // ギャラリーセクションの扉アニメーション
-     // function setupDoorAnimation() {
-     //     // 以前のアニメーションを全て削除
-     //     ScrollTrigger.getAll().forEach(trigger => {
-     //         if (trigger.vars && trigger.vars.id && 
-     //             (trigger.vars.id.includes('gallery') || 
-     //              String(trigger.trigger).includes('gallery'))) {
-     //             trigger.kill();
-     //         }
-     //     });
+     function setupDoorAnimation() {
+         // 以前のアニメーションを全て削除
+         ScrollTrigger.getAll().forEach(trigger => {
+             if (trigger.vars && trigger.vars.id && 
+                 (trigger.vars.id.includes('gallery') || 
+                  String(trigger.trigger).includes('gallery'))) {
+                 trigger.kill();
+             }
+         });
          
-     //     // ギャラリーの初期状態を設定
-     //     const gallery = document.querySelector('.front-page__gallery');
-     //     if (!gallery) return;
+         // ギャラリーの初期状態を設定
+         const gallery = document.querySelector('.front-page__gallery');
+         if (!gallery) return;
          
-     //     // ピン留め設定 - md3以上でのみ適用
-     //     if (window.matchMedia('(min-width: 921px)').matches) {
-     //         ScrollTrigger.create({
-     //             trigger: ".front-page__gallery",
-     //             start: "top top",
-     //             end: "+=300%",
-     //             pin: true,
-     //             pinSpacing: true,
-     //             id: "gallery-pin"
-     //         });
-     //     }
+         // ピン留め設定 - md3以上でのみ適用
+         if (window.matchMedia('(min-width: 921px)').matches) {
+             ScrollTrigger.create({
+                 trigger: ".front-page__gallery",
+                 start: "top top",
+                 end: "+=300%",
+                 pin: true,
+                 pinSpacing: true,
+                 id: "gallery-pin"
+             });
+         }
          
-     //     // 3D効果を強化
-     //     gallery.style.perspective = '1500px';
+         // 3D効果を強化
+         gallery.style.perspective = '1500px';
          
-     //     // コンテナを最初は隠す
-     //     gsap.set('.front-page__gallery-container', {
-     //         opacity: 0,
-     //         scale: 0.8,
-     //         z: -100,
-     //     });
-     //     // 左右ドアの初期設定
-     //     gsap.set(['.gallery__side--left', '.gallery__side--right'], {
-     //         rotateY: 0,
-     //     });
+         // コンテナを最初は隠す
+         gsap.set('.front-page__gallery-container', {
+             opacity: 0,
+             scale: 0.8,
+             z: -100,
+         });
+         // 左右ドアの初期設定
+         gsap.set(['.gallery__side--left', '.gallery__side--right'], {
+             rotateY: 0,
+         });
          
-     //     // 画像を配置
-     //     const leftItems = gsap.utils.toArray('.gallery__side--left .gallery__item');
-     //     const rightItems = gsap.utils.toArray('.gallery__side--right .gallery__item');
+         // 画像を配置
+         const leftItems = gsap.utils.toArray('.gallery__side--left .gallery__item');
+         const rightItems = gsap.utils.toArray('.gallery__side--right .gallery__item');
          
-     //     // 画像の初期状態設定
-     //     [...leftItems, ...rightItems].forEach((item) => {
-     //         gsap.set(item, {
-     //             opacity: 1,
-     //             y: gsap.utils.random(-10, 10),
-     //             rotateZ: gsap.utils.random(-3, 3),
-     //             scale: gsap.utils.random(0.92, 1)
-     //         });
-     //     });
+         // 画像の初期状態設定
+         [...leftItems, ...rightItems].forEach((item) => {
+             gsap.set(item, {
+                 opacity: 1,
+                 y: gsap.utils.random(-10, 10),
+                 rotateZ: gsap.utils.random(-3, 3),
+                 scale: gsap.utils.random(0.92, 1)
+             });
+         });
          
-     //     // メインのアニメーションタイムライン
-     //     const tl = gsap.timeline({
-     //         scrollTrigger: {
-     //             trigger: '.front-page__gallery',
-     //             start: 'top top',
-     //             end: '+=300%',
-     //             scrub: 1.5,
-     //             invalidateOnRefresh: true,
-     //             id: 'gallery-door-animation',
-     //         }
-     //     });
+         // メインのアニメーションタイムライン
+         const tl = gsap.timeline({
+             scrollTrigger: {
+                 trigger: '.front-page__gallery',
+                 start: 'top top',
+                 end: '+=300%',
+                 scrub: 1.5,
+                 invalidateOnRefresh: true,
+                 id: 'gallery-door-animation',
+             }
+         });
          
-     //     // 扉が開くアニメーション
-     //     tl.to('.gallery__side--left', {
-     //         rotateY: 105,
-     //         ease: 'power1.inOut',
-     //         duration: 3
-     //     }, 1);
+         // 扉が開くアニメーション
+         tl.to('.gallery__side--left', {
+             rotateY: 105,
+             ease: 'power1.inOut',
+             duration: 3
+         }, 1);
          
-     //     tl.to('.gallery__side--right', {
-     //         rotateY: -105,
-     //         ease: 'power1.inOut',
-     //         duration: 3
-     //     }, 1);
+         tl.to('.gallery__side--right', {
+             rotateY: -105,
+             ease: 'power1.inOut',
+             duration: 3
+         }, 1);
          
-     //     // コンテナが現れて拡大するアニメーション
-     //     tl.to('.front-page__gallery-container', {
-     //         opacity: 1,
-     //         scale: 1,
-     //         z: 0,
-     //         duration: 2,
-     //         ease: 'power2.out'
-     //     }, 2.5);
+         // コンテナが現れて拡大するアニメーション
+         tl.to('.front-page__gallery-container', {
+             opacity: 1,
+             scale: 1,
+             z: 0,
+             duration: 2,
+             ease: 'power2.out'
+         }, 2.5);
          
-     //     // コンテナが画面いっぱいに拡大
-     //     tl.to('.front-page__gallery-container', {
-     //         scale: 1.5,
-     //         duration: 4,
-     //         ease: 'power1.inOut'
-     //     }, 5);
+         // コンテナが画面いっぱいに拡大
+         tl.to('.front-page__gallery-container', {
+             scale: 1.5,
+             duration: 4,
+             ease: 'power1.inOut'
+         }, 5);
          
-     //     // 画像が整うアニメーション
-     //     tl.to(['.gallery__side--left .gallery__item', '.gallery__side--right .gallery__item'], {
-     //         y: 0,
-     //         rotateZ: 0,
-     //         scale: 1,
-     //         stagger: 0.05,
-     //         duration: 1.5,
-     //         ease: 'back.out(1.2)'
-     //     }, 0.5);
+         // 画像が整うアニメーション
+         tl.to(['.gallery__side--left .gallery__item', '.gallery__side--right .gallery__item'], {
+             y: 0,
+             rotateZ: 0,
+             scale: 1,
+             stagger: 0.05,
+             duration: 1.5,
+             ease: 'back.out(1.2)'
+         }, 0.5);
          
-     //     // リサイズ対応
-     //     window.addEventListener('resize', () => {
-     //         ScrollTrigger.refresh();
-     //     });
-     // }
+         // リサイズ対応
+         window.addEventListener('resize', () => {
+             ScrollTrigger.refresh();
+         });
+     }
  
      // 初回実行
```

```diff
              scrub: 1,                 // スクロールに同期
              pin: true,                // ピン留め有効
-     markers: true,         // デバッグ用マーカー表示
+             // markers: false,         // デバッグ用マーカー表示 - 削除
            }
          });
```

---

アニメーションを機能させるため、以下の修正を行いました：

1. `setupDoorAnimation()` 関数のコメントアウトを解除しました。この関数はギャラリーセクションのドアのようなアニメーション効果を提供します。

2. `setupGalleryAnimation()` 関数内のデバッグマーカーを無効化しました：
   - `markers: true` を `// markers: false` にコメントアウトして変更

これにより、ギャラリーセクションに2つのアニメーション効果が適用されます：
- ドアが開くような3D効果のアニメーション
- 左右の要素が画面外へスライドするアニメーション

これでWebサイトのギャラリーセクションのアニメーションが正常に機能するはずです。

---

