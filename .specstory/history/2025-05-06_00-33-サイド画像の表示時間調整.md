<!-- Generated by SpecStory -->

# サイド画像の表示時間調整 (2025-05-06 09:33:54)

_**User**_

@_front-page.scss @animetions.js @front-page.php 

サイドの画像は画面アウトが早いのでもっとギリギリまで画面に残るようなkんじで

---

_**Assistant**_



---

サイド画像の表示時間を延長するために、animetions.jsファイルを修正します。

---

```diff
          trigger: ".front-page__gallery-container",
          start: "top top",
-         end: "bottom 40%",
-         scrub: true
+         end: "bottom bottom",
+         scrub: 1
        }
      })
      .fromTo(
        ".front-page__gallery-container",
        { width: "30%" },
-       { width: "100%", ease: "none" }
+       { width: "100%", ease: "power1.inOut" }
      );
  
```

```diff
          trigger: ".front-page__gallery-container",
          start: "top top",
-         end: "bottom 40%",
-         scrub: true
+         end: "bottom bottom",
+         scrub: 1
        }
      })
      .to(
        ".parallax-gallery__side--left",
-       { x: "-100vw", y: "-100vh", ease: "none" },
+       { x: "-100vw", y: "-50vh", ease: "power1.inOut" },
        0
      )
      .to(
        ".parallax-gallery__side--right",
-       { x: "100vw", y: "-100vh", ease: "none" },
+       { x: "100vw", y: "-50vh", ease: "power1.inOut" },
        0
      );
```

---

変更内容の説明:

1. サイド画像のアニメーション持続時間を延長しました:
   - ScrollTriggerの「end」値を「bottom 40%」から「bottom bottom」に変更し、ギャラリーセクションの下端が画面の下端に到達するまでアニメーションが継続するようにしました

2. 画像が画面から出る動きを緩やかにしました:
   - 垂直方向の移動量を「-100vh」から「-50vh」に減らし、画像が急激に上に移動しないようにしました
   - 「ease: "none"」から「ease: "power1.inOut"」に変更して、動きをより滑らかにしました

3. アニメーションのスクラブ値を「true」から「1」に変更:
   - これによりスクロール量とアニメーション進行の関係がより滑らかになり、急激な変化が抑えられます

これらの変更により、サイド画像がギャラリーセクションのスクロール中により長く画面内に残り、より自然に退場するようになります。

---

_**User**_

両サイドの画像の動きに関しては、もうちょっと縦方向の要素を強めてほしい上方向の要素を強めてほしいです

---

_**Assistant**_



---

サイド画像の縦方向（上方向）の動きを強めるよう修正します。

---

```diff
      .to(
        ".parallax-gallery__side--left",
-       { x: "-100vw", y: "-50vh", ease: "power1.inOut" },
+       { x: "-100vw", y: "-150vh", ease: "power2.in" },
        0
      )
      .to(
        ".parallax-gallery__side--right",
-       { x: "100vw", y: "-50vh", ease: "power1.inOut" },
+       { x: "100vw", y: "-150vh", ease: "power2.in" },
        0
      );
```

---

変更内容の説明:

1. 縦方向の移動量を大幅に増加しました:
   - y値を「-50vh」から「-150vh」に変更し、画像が画面の高さの1.5倍分上方向に移動するようにしました
   - これにより、サイドの画像がスクロール時により強く上方向に移動する効果が得られます

2. イージング効果を強化しました:
   - 「ease: "power1.inOut"」から「ease: "power2.in"」に変更
   - この設定は加速度が増していくようなアニメーションになり、スクロールにつれて上方向への移動が徐々に加速していく効果が得られます

これらの変更により、ギャラリーセクションをスクロールする際、両サイドの画像がより劇的に上方向へ移動するようになり、より動的で印象的な視覚効果が作り出されます。

---

_**User**_

サイドの両サイドの画像はスクロールしていた時に、縦方向上方向にスクロールスクロールされて、画面の真ん中より上40%位のあたりまで来たら斜め上に画面外にかけていくような感じのアニメーション2段階上にスクロールされて後斜め上スクロールされていくと、2段階の動きをしてください

---

_**Assistant**_



---

2段階のアニメーション（垂直上昇→斜め上に退場）を実装します。

---

```diff
        }
      })
+     // 左側の画像のアニメーション（2段階）
      .to(
        ".parallax-gallery__side--left",
-       { x: "-100vw", y: "-200vh", ease: "power2.in" },
-       0
+       { 
+         y: "-120vh", // 最初は主に上方向に移動（第1段階）
+         x: "-10vw",  // 水平方向の移動は最小限に
+         ease: "power1.inOut" 
+       },
+       0
+     )
+     .to(
+       ".parallax-gallery__side--left",
+       { 
+         y: "-200vh", // さらに上方向に移動（第2段階）
+         x: "-100vw", // 水平方向にも大きく移動（斜め上に）
+         ease: "power2.in" 
+       },
+       0.5 // タイムラインの途中（50%地点）から開始
      )
+     
+     // 右側の画像のアニメーション（2段階）
      .to(
        ".parallax-gallery__side--right",
-       { x: "100vw", y: "-200vh", ease: "power2.in" },
-       0
+       { 
+         y: "-120vh", // 最初は主に上方向に移動（第1段階）
+         x: "10vw",   // 水平方向の移動は最小限に
+         ease: "power1.inOut" 
+       },
+       0
+     )
+     .to(
+       ".parallax-gallery__side--right",
+       { 
+         y: "-200vh", // さらに上方向に移動（第2段階）
+         x: "100vw",  // 水平方向にも大きく移動（斜め上に）
+         ease: "power2.in" 
+       },
+       0.5 // タイムラインの途中（50%地点）から開始
      );
  });
```

---

変更内容の説明:

サイド画像に2段階のアニメーションを実装しました:

### 第1段階: 主に上方向への移動
- 最初のスクロールで画像は主に上方向に移動します（y: "-120vh"）
- 水平方向の移動は最小限（x: "±10vw"）に抑えています
- イージングは「power1.inOut」で滑らかな動きになります

### 第2段階: 斜め上方向への退場
- スクロールの後半（タイムラインの50%地点から）で発動します
- 垂直方向にさらに上に移動（y: "-200vh"）し、同時に水平方向に大きく移動（x: "±100vw"）
- イージングは「power2.in」で加速しながら画面外に退場します

この実装により、スクロール時に:
1. 最初は両サイドの画像が上方向にスクロールします
2. スクロールが進むと（ギャラリーが画面中央より上40%あたりに達すると）、画像は斜め上方向に加速しながら画面外に移動します

この2段階の動きにより、より自然でダイナミックな視覚体験が得られます。

---

_**User**_

@animetions.js parallax-gallery__item--2~3,5~6も同じような動きにして

---

_**Assistant**_



---

```diff
      })
      // 左側の画像のアニメーション（2段階）
+     // アイテム1
      .to(
        ".parallax-gallery__item--1",
```

```diff
        0.5 // タイムラインの途中（50%地点）から開始
      )
+     
+     // アイテム2
+     .to(
+       ".parallax-gallery__item--2",
+       { 
+         y: "-120vh",
+         x: "-10vw",
+         ease: "power1.inOut" 
+       },
+       0.05 // 少し遅れて開始
+     )
+     .to(
+       ".parallax-gallery__item--2",
+       { 
+         y: "-200vh",
+         x: "-100vw",
+         ease: "power2.in" 
+       },
+       0.55 // 少し遅れて開始
+     )
+     
+     // アイテム3
+     .to(
+       ".parallax-gallery__item--3",
+       { 
+         y: "-120vh",
+         x: "-10vw",
+         ease: "power1.inOut" 
+       },
+       0.1 // さらに遅れて開始
+     )
+     .to(
+       ".parallax-gallery__item--3",
+       { 
+         y: "-200vh",
+         x: "-100vw",
+         ease: "power2.in" 
+       },
+       0.6 // さらに遅れて開始
+     )
      
      // 右側の画像のアニメーション（2段階）
+     // アイテム4
      .to(
        ".parallax-gallery__item--4",
```

```diff
        },
        0.5 // タイムラインの途中（50%地点）から開始
+     )
+     
+     // アイテム5
+     .to(
+       ".parallax-gallery__item--5",
+       { 
+         y: "-120vh",
+         x: "10vw",
+         ease: "power1.inOut" 
+       },
+       0.05 // 少し遅れて開始
+     )
+     .to(
+       ".parallax-gallery__item--5",
+       { 
+         y: "-200vh",
+         x: "100vw",
+         ease: "power2.in" 
+       },
+       0.55 // 少し遅れて開始
+     )
+     
+     // アイテム6
+     .to(
+       ".parallax-gallery__item--6",
+       { 
+         y: "-120vh",
+         x: "10vw",
+         ease: "power1.inOut" 
+       },
+       0.1 // さらに遅れて開始
+     )
+     .to(
+       ".parallax-gallery__item--6",
+       { 
+         y: "-200vh",
+         x: "100vw",
+         ease: "power2.in" 
+       },
+       0.6 // さらに遅れて開始
      );
  });
```

---

追加した内容の説明:

すべての画像(item-1から6)に2段階アニメーションを適用しました。より自然でダイナミックな動きになるように、以下の工夫をしています：

1. **時間差を設けたアニメーション**:
   - 各アイテムの開始タイミングを少しずつ遅らせました（0, 0.05, 0.1秒）
   - これにより、画像が一斉に動くのではなく、順番に動き始めて、波のような視覚効果が生まれます

2. **共通のアニメーションパターン**:
   - すべての画像で同じ2段階アニメーションを使用
   - 第1段階: 主に上方向への移動（y: -120vh）、水平方向は少し（x: ±10vw）
   - 第2段階: 斜め上への退場（y: -200vh, x: ±100vw）

3. **左右で対称的な動き**:
   - 左側の画像（item-1,2,3）: 左上方向に移動
   - 右側の画像（item-4,5,6）: 右上方向に移動

これにより、スクロール時に6枚の画像がわずかな時間差で上方向に移動し、その後斜め上に加速しながら画面外に退場する、より自然で立体的なアニメーション効果が得られます。

---

_**User**_

動きはいい感じ！
ただ、途中でfront-page__gallery-containerと両サイドの画像がかぶるから

スクロールの過程で要素変化の幅や、動きを調整して
絶対被らないようにして

---

_**Assistant**_



---

gallery-containerと両サイドの画像が重ならないように修正します。

---

```diff
        ".front-page__gallery-container",
        { width: "30%" },
-       { width: "100%", ease: "power1.inOut" }
+       { 
+         width: "100%", 
+         ease: "power1.inOut",
+         onStart: function() {
+           // ギャラリーコンテナのz-indexを下げる
+           gsap.set(".front-page__gallery-container", {zIndex: 1});
+           // サイド画像のz-indexを上げる
+           gsap.set(".parallax-gallery__side", {zIndex: 2});
+         }
+       }
      );
  
```

```diff
        ".parallax-gallery__item--1",
        { 
-         y: "-120vh", // 最初は主に上方向に移動（第1段階）
-         x: "-10vw",  // 水平方向の移動は最小限に
+         y: "-100vh", // 早めに上方向に移動開始
+         x: "-20vw",  // 水平方向の移動を増やして外側に
          ease: "power1.inOut" 
        },
```

```diff
        ".parallax-gallery__item--1",
        { 
-         y: "-200vh", // さらに上方向に移動（第2段階）
-         x: "-100vw", // 水平方向にも大きく移動（斜め上に）
+         y: "-200vh",
+         x: "-120vw", // より大きく外側に
          ease: "power2.in" 
        },
-       0.5 // タイムラインの途中（50%地点）から開始
+       0.4 // より早く第2段階を開始
      )
      
```

```diff
        ".parallax-gallery__item--2",
        { 
-         y: "-120vh",
-         x: "-10vw",
+         y: "-110vh",
+         x: "-25vw", // より外側に
          ease: "power1.inOut" 
        },
-       0.05 // 少し遅れて開始
+       0.03 // より早く開始
      )
      .to(
        ".parallax-gallery__item--2",
        { 
          y: "-200vh",
-         x: "-100vw",
+         x: "-120vw",
          ease: "power2.in" 
        },
-       0.55 // 少し遅れて開始
+       0.43 // より早く第2段階を開始
      )
      
```

```diff
        { 
          y: "-120vh",
-         x: "-10vw",
+         x: "-30vw", // より外側に
          ease: "power1.inOut" 
        },
-       0.1 // さらに遅れて開始
+       0.06 // より早く開始
      )
      .to(
        ".parallax-gallery__item--3",
        { 
          y: "-200vh",
-         x: "-100vw",
+         x: "-120vw",
          ease: "power2.in" 
        },
-       0.6 // さらに遅れて開始
+       0.46 // より早く第2段階を開始
      )
      
```

```diff
        ".parallax-gallery__item--4",
        { 
-         y: "-120vh", // 最初は主に上方向に移動（第1段階）
-         x: "10vw",   // 水平方向の移動は最小限に
+         y: "-100vh",
+         x: "20vw", // より外側に
          ease: "power1.inOut" 
        },
```

```diff
        ".parallax-gallery__item--4",
        { 
-         y: "-200vh", // さらに上方向に移動（第2段階）
-         x: "100vw",  // 水平方向にも大きく移動（斜め上に）
+         y: "-200vh",
+         x: "120vw", // より大きく外側に
          ease: "power2.in" 
        },
-       0.5 // タイムラインの途中（50%地点）から開始
+       0.4 // より早く第2段階を開始
      )
      
```

```diff
        ".parallax-gallery__item--5",
        { 
-         y: "-120vh",
-         x: "10vw",
+         y: "-110vh",
+         x: "25vw", // より外側に
          ease: "power1.inOut" 
        },
-       0.05 // 少し遅れて開始
+       0.03 // より早く開始
      )
      .to(
        ".parallax-gallery__item--5",
        { 
          y: "-200vh",
-         x: "100vw",
+         x: "120vw",
          ease: "power2.in" 
        },
-       0.55 // 少し遅れて開始
+       0.43 // より早く第2段階を開始
      )
      
```

```diff
        { 
          y: "-120vh",
-         x: "10vw",
+         x: "30vw", // より外側に
          ease: "power1.inOut" 
        },
-       0.1 // さらに遅れて開始
+       0.06 // より早く開始
      )
      .to(
        ".parallax-gallery__item--6",
        { 
          y: "-200vh",
-         x: "100vw",
+         x: "120vw",
          ease: "power2.in" 
        },
-       0.6 // さらに遅れて開始
+       0.46 // より早く第2段階を開始
      );
  });
```

---

重なりを解消するために以下の3つの主要な改善を行いました：

### 1. Z-indexによる重なり順序の制御
- ギャラリーコンテナのz-indexを1に設定
- サイド画像のz-indexを2に設定
- これにより、常にサイド画像がギャラリーコンテナの上に表示されるようになり、視覚的な重なりが解消されます

### 2. 画像の移動パスを外側に調整
- 水平移動量を大幅に増加（左側: -10vw → -20/-25/-30vw、右側: 10vw → 20/25/30vw）
- 第2段階の水平移動も拡大（±100vw → ±120vw）
- これにより、画像が中央のギャラリーコンテナを避けて外側に沿って移動するようになります

### 3. アニメーションのタイミング調整
- すべての開始タイミングを早めて、ギャラリーコンテナが広がる前に十分に動き始めるようにしました
- 第1段階→第2段階の切り替えも早く（0.5 → 0.4）に設定
- アイテム間の遅延も短縮（0.05 → 0.03, 0.1 → 0.06）

これらの変更により、両サイドの画像はギャラリーコンテナと重なることなく、スムーズにスクロールアニメーションを実行します。z-indexの設定によって、万が一視覚的に重なる場合でも、画像が常に前面に表示される保証が追加されました。

---

_**User**_

@front-page.php parallax-gallery__item--8まであるあからそれ用にjs修正して@animetions.js 

---

_**Assistant**_



---

```diff
        },
        0.46 // より早く第2段階を開始
+     )
+     
+     // アイテム7
+     .to(
+       ".parallax-gallery__item--7",
+       { 
+         y: "-130vh",
+         x: "35vw", // より外側に
+         ease: "power1.inOut" 
+       },
+       0.09 // より早く開始
+     )
+     .to(
+       ".parallax-gallery__item--7",
+       { 
+         y: "-200vh",
+         x: "120vw",
+         ease: "power2.in" 
+       },
+       0.49 // より早く第2段階を開始
+     )
+     
+     // アイテム8
+     .to(
+       ".parallax-gallery__item--8",
+       { 
+         y: "-140vh",
+         x: "40vw", // より外側に
+         ease: "power1.inOut" 
+       },
+       0.12 // より早く開始
+     )
+     .to(
+       ".parallax-gallery__item--8",
+       { 
+         y: "-200vh",
+         x: "120vw",
+         ease: "power2.in" 
+       },
+       0.52 // より早く第2段階を開始
      );
  });
```

---

HTMLに合わせて残りの2つのギャラリーアイテム（7と8）のアニメーションを追加しました。変更点の説明：

### 追加したアニメーション

1. **アイテム7のアニメーション**:
   - 第1段階: より高い位置（y: -130vh）に移動し、右側（x: 35vw）に動く
   - 第2段階: 完全に上方向（y: -200vh）に移動しながら、右側（x: 120vw）に退場
   - タイミング: 0.09秒から開始、第2段階は0.49秒から

2. **アイテム8のアニメーション**:
   - 第1段階: さらに高い位置（y: -140vh）に移動し、右側（x: 40vw）に動く
   - 第2段階: 完全に上方向（y: -200vh）に移動しながら、右側（x: 120vw）に退場
   - タイミング: 0.12秒から開始、第2段階は0.52秒から

### アニメーションパターンの特徴

- **段階的なタイミング**: 各アイテムが少しずつ遅れて動き始め、波のような視覚効果を生み出す
- **異なる初期値**: y値(-100vh→-140vh)とx値(20vw→40vw)を徐々に大きくし、アイテムごとに異なる経路で移動
- **ギャラリーコンテナとの重なり回避**: 十分な外側への移動量を確保し、中央部と重ならないように

これで8つすべてのギャラリーアイテムがアニメーションし、スクロール時に段階的に上方向へ移動した後、斜め上に退場する動きになります。それぞれのアイテムが少しずつ異なる挙動を示すことで、より自然で立体的な視覚効果が得られます。

---

_**User**_

parallax-gallery__item--4は左側に設置されてます@animetions.js 

---

_**Assistant**_



---

